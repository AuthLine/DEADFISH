/*
jQWidgets v11.0.1 (2020-Dec)
Copyright (c) 2011-2020 jQWidgets.
License: https://jqwidgets.com/license/
*/
/* eslint-disable */

(function(a){a.jqx.jqxWidget("jqxListBox","",{});a.extend(a.jqx._jqxListBox.prototype,{defineInstance:function(){var b={disabled:false,checkboxSize:16,checkboxes:false,width:null,height:null,items:new Array(),multiple:false,selectedIndex:-1,selectedIndexes:new Array(),source:null,scrollBarSize:a.jqx.utilities.scrollBarSize,enableHover:true,enableSelection:true,visualItems:new Array(),groups:new Array(),equalItemsWidth:true,itemHeight:-1,visibleItems:new Array(),emptyGroupText:"Group",hasThreeStates:false,autoHeight:false,autoItemsHeight:false,roundedcorners:true,touchMode:"auto",displayMember:"",groupMember:"",valueMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:true,incrementalSearchDelay:1000,incrementalSearchKeyDownDelay:300,allowDrag:false,allowDrop:true,dropAction:"default",touchModeStyle:"auto",keyboardNavigation:true,enableMouseWheel:true,multipleextended:false,selectedValues:new Array(),emptyString:"",rtl:false,rendered:null,renderer:null,dragStart:null,dragEnd:null,focusable:true,ready:null,_checkForHiddenParent:true,autoBind:true,_renderOnDemand:false,filterable:false,filterHeight:27,filterPlaceHolder:"Looking for",filterDelay:100,filterChange:null,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete","itemAdd","itemRemove","itemUpdate"]};if(this===a.jqx._jqxListBox.prototype){return b}a.extend(true,this,b);return b},createInstance:function(c){var b=this;if(a.jqx.utilities.scrollBarSize!=15){b.scrollBarSize=a.jqx.utilities.scrollBarSize}if(b.width==null){b.width=200}if(b.height==null){b.height=200}if(b.isMaterialized()){var f=window.getComputedStyle(b.element);var e=f.getPropertyValue("--jqx-list-item-height");if(e&&this.itemHeight===-1){this.itemHeight=parseInt(e)}}b.renderListBox();var d=b;a.jqx.utilities.resize(b.host,function(){d._updateSize()},false,b._checkForHiddenParent)},resize:function(c,b){this.width=c;this.height=b;this._updateSize()},render:function(){this.renderListBox();this.refresh()},renderListBox:function(){var p=this;var o=p.element.nodeName.toLowerCase();if(o=="select"||o=="ul"||o=="ol"){p.field=p.element;if(p.field.className){p._className=p.field.className}var k={title:p.field.title};if(p.field.id.length){k.id=p.field.id.replace(/[^\w]/g,"_")+"_jqxListBox"}else{k.id=a.jqx.utilities.createId()+"_jqxListBox"}var b=a("<div></div>",k);if(!p.width){p.width=a(p.field).width()}if(!p.height){p.height=a(p.field).outerHeight()}p.element.style.cssText=p.field.style.cssText;a(p.field).hide().after(b);var h=p.host.data();p.host=b;p.host.data(h);p.element=b[0];p.element.id=p.field.id;p.field.id=k.id;if(p._className){p.host.addClass(p._className);a(p.field).removeClass(p._className)}if(p.field.tabIndex){var d=p.field.tabIndex;p.field.tabIndex=-1;p.element.tabIndex=d}}else{if(p.host.find("li").length>0||p.host.find("option").length>0){var r=a.jqx.parseSourceTag(p.element);p.source=r.items}}p.element.innerHTML="";var p=p;var j=p.element.className;j+=" "+p.toThemeProperty("jqx-listbox");j+=" "+p.toThemeProperty("jqx-reset");j+=" "+p.toThemeProperty("jqx-rc-all");j+=" "+p.toThemeProperty("jqx-widget");j+=" "+p.toThemeProperty("jqx-widget-content");p.element.className=j;var i=false;var m=window.getComputedStyle(this.element);var g=parseInt(m.borderLeftWidth)*2;var c=m.boxSizing;if(this.element.offsetWidth===0){g=2}if(c==="border-box"||isNaN(g)){g=0}if(p.width!=null&&p.width.toString().indexOf("%")!=-1){p.host.width(p.width);if(g>0){this.host.css("box-sizing","border-box")}i=true}if(p.height!=null&&p.height.toString().indexOf("%")!=-1){p.host.height(p.height);if(p.host.height()==0){p.host.height(200)}i=true}if(p.width!=null&&p.width.toString().indexOf("px")!=-1){p.element.style.width=parseInt(p.width)-g+"px"}else{if(p.width!=undefined&&!isNaN(p.width)){p.element.style.width=parseInt(p.width)-g+"px"}}if(p.height!=null&&p.height.toString().indexOf("px")!=-1){p.element.style.height=parseInt(p.height)-g+"px"}else{if(p.height!=undefined&&!isNaN(p.height)){p.element.style.height=parseInt(p.height)-g+"px"}}if(p.multiple||p.multipleextended||p.checkboxes){a.jqx.aria(p,"aria-multiselectable",true)}else{a.jqx.aria(p,"aria-multiselectable",false)}var f="<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='filter"+p.element.id+"' style='display: none; visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><input style='position: absolute;'/></div><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+p.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+p.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/></div></div>";p.host.attr("role","listbox");p.element.innerHTML=f;if(p._checkForHiddenParent){p._addInput();if(!p.host.attr("tabIndex")){p.host.attr("tabIndex",1)}}p.filter=a(p.element.firstChild.firstChild.firstChild);p.filterInput=a(p.filter[0].firstChild);p.filterInput.attr("placeholder",p.filterPlaceHolder);p.filterInput.addClass(p.toThemeProperty("jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all"));p.addHandler(p.filterInput,"keyup.textchange",function(s){if(s.keyCode==13){p._search(s)}else{if(p.filterDelay>0){if(p._filterTimer){clearTimeout(p._filterTimer)}p._filterTimer=setTimeout(function(){p._search(s)},p.filterDelay)}}s.stopPropagation()});var l=a(p.element.firstChild.firstChild.firstChild.nextSibling.nextSibling);if(!p.host.jqxButton){throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");return}if(!l.jqxScrollBar){throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");return}var e=parseInt(p.host.height())/2;if(e==0){e=10}p.vScrollBar=l.jqxScrollBar({_initialLayout:true,vertical:true,rtl:p.rtl,theme:p.theme,touchMode:p.touchMode,largestep:e});var q=a(p.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling);p.hScrollBar=q.jqxScrollBar({_initialLayout:true,vertical:false,rtl:p.rtl,touchMode:p.touchMode,theme:p.theme});p.content=a(p.element.firstChild.firstChild.firstChild.nextSibling);p.content[0].id="listBoxContent"+p.element.id;p.bottomRight=a(p.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling).addClass(p.toThemeProperty("jqx-listbox-bottomright")).addClass(p.toThemeProperty("jqx-scrollbar-state-normal"));p.bottomRight[0].id="bottomRight"+p.element.id;p.vScrollInstance=a.data(p.vScrollBar[0],"jqxScrollBar").instance;p.hScrollInstance=a.data(p.hScrollBar[0],"jqxScrollBar").instance;if(p.isTouchDevice()){if(!(a.jqx.browser.msie&&a.jqx.browser.version<9)){var n=a("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>");p.content.parent().append(n);p.overlayContent=p.host.find(".overlay");if(p.filterable){p.overlayContent.css("top","30px")}}}p._updateTouchScrolling();p.host.addClass("jqx-disableselect");if(p.host.jqxDragDrop){window.jqxListBoxDragDrop()}},_highlight:function(b,c){var d=c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(new RegExp("("+d+")","ig"),function(e,f){return"<b>"+f+"</b>"})},_addInput:function(){var b=this.host.attr("name");if(b){this.host.attr("name","")}this.input=a("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",b)},_updateTouchScrolling:function(){var b=this;if(this.isTouchDevice()){b.enableHover=false;var c=this.overlayContent?this.overlayContent:this.content;this.removeHandler(a(c),a.jqx.mobile.getTouchEventName("touchstart")+".touchScroll");this.removeHandler(a(c),a.jqx.mobile.getTouchEventName("touchmove")+".touchScroll");this.removeHandler(a(c),a.jqx.mobile.getTouchEventName("touchend")+".touchScroll");this.removeHandler(a(c),"touchcancel.touchScroll");a.jqx.mobile.touchScroll(c,b.vScrollInstance.max,function(f,e){if(e!=null&&b.vScrollBar.css("visibility")!="hidden"){var d=b.vScrollInstance.value;b.vScrollInstance.setPosition(e);b._lastScroll=new Date()}if(f!=null&&b.hScrollBar.css("visibility")!="hidden"){var d=b.hScrollInstance.value;b.hScrollInstance.setPosition(f);b._lastScroll=new Date()}},this.element.id,this.hScrollBar,this.vScrollBar);if(b.vScrollBar.css("visibility")!="visible"&&b.hScrollBar.css("visibility")!="visible"){a.jqx.mobile.setTouchScroll(false,this.element.id)}else{a.jqx.mobile.setTouchScroll(true,this.element.id)}this._arrange()}},isTouchDevice:function(){var b=a.jqx.mobile.isTouchDevice();if(this.touchMode==true){if(this.touchDevice){return true}if(a.jqx.browser.msie&&a.jqx.browser.version<9){return false}this.touchDevice=true;b=true;a.jqx.mobile.setMobileSimulator(this.element)}else{if(this.touchMode==false){b=false}}if(b&&this.touchModeStyle!=false){this.scrollBarSize=a.jqx.utilities.touchScrollBarSize}if(b){this.host.addClass(this.toThemeProperty("jqx-touch"))}return b},beginUpdate:function(){this.updatingListBox=true},endUpdate:function(){this.updatingListBox=false;if((this.allowDrag&&this._enableDragDrop)||(this.virtualSize&&this.virtualSize.height<10+this.host.height())){this._addItems(true)}else{this._addItems(false)}this._renderItems();if(this.allowDrag&&this._enableDragDrop){this._enableDragDrop()}},beginUpdateLayout:function(){this.updating=true},resumeUpdateLayout:function(){this.updating=false;this.vScrollInstance.value=0;this._render(false)},propertiesChangedHandler:function(b,c,d){if(d.width&&d.height&&Object.keys(d).length==2){b._cachedItemHtml=new Array();b.refresh()}},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false){return}if(e==d){return}if(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&Object.keys(b.batchUpdate).length==2){return}if(c=="_renderOnDemand"){b._render(false,true);if(b.selectedIndex!=-1){var f=b.selectedIndex;b.selectedIndex=-1;b._stopEvents=true;b.selectIndex(f,false,true);if(b.selectedIndex==-1){b.selectedIndex=f}b._stopEvents=false}}if(c=="filterable"){b.refresh()}if(c=="filterHeight"){b._arrange()}if(c=="filterPlaceHolder"){b.filterInput.attr("placeholder",d)}if(c=="renderer"){b._cachedItemHtml=new Array();b.refresh()}if(c=="itemHeight"||c==="checkboxSize"){b.refresh()}if(c=="source"||c=="checkboxes"){if(d==null&&e&&e.unbindBindingUpdate){e.unbindBindingUpdate(b.element.id);e.unbindDownloadComplete(b.element.id)}b.clearSelection();b.refresh()}if(c=="scrollBarSize"||c=="equalItemsWidth"){if(d!=e){b._updatescrollbars()}}if(c=="disabled"){b._renderItems();b.vScrollBar.jqxScrollBar({disabled:d});b.hScrollBar.jqxScrollBar({disabled:d})}if(c=="touchMode"||c=="rtl"){b._removeHandlers();b.vScrollBar.jqxScrollBar({touchMode:d});b.hScrollBar.jqxScrollBar({touchMode:d});if(c=="touchMode"){if(!(a.jqx.browser.msie&&a.jqx.browser.version<9)){var h=a("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>");b.content.parent().append(h);b.overlayContent=b.host.find(".overlay")}}if(b.filterable&&b.filterInput){if(c=="rtl"&&d){b.filterInput.addClass(b.toThemeProperty("jqx-rtl"))}else{if(c=="rtl"&&!d){b.filterInput.removeClass(b.toThemeProperty("jqx-rtl"))}}b._arrange()}b._updateTouchScrolling();b._addHandlers();b._render(false)}if(!this.updating){if(c=="width"||c=="height"){b._updateSize()}}if(c=="theme"){if(e!=d){b.hScrollBar.jqxScrollBar({theme:b.theme});b.vScrollBar.jqxScrollBar({theme:b.theme});b.host.removeClass();b.host.addClass(b.toThemeProperty("jqx-listbox"));b.host.addClass(b.toThemeProperty("jqx-widget"));b.host.addClass(b.toThemeProperty("jqx-widget-content"));b.host.addClass(b.toThemeProperty("jqx-reset"));b.host.addClass(b.toThemeProperty("jqx-rc-all"));b.refresh()}}if(c=="selectedIndex"){b.clearSelection();b.selectIndex(d,true)}if(c=="displayMember"||c=="valueMember"){if(e!=d){var g=b.selectedIndex;b.refresh();b.selectedIndex=g;b.selectedIndexes[g]=g}b._renderItems()}if(c=="autoHeight"){if(e!=d){b._render(false)}else{b._updatescrollbars();b._renderItems()}}if(b._checkForHiddenParent&&a.jqx.isHidden(b.host)){a.jqx.utilities.resize(this.host,function(){b._updateSize()},false,b._checkForHiddenParent)}},loadFromSelect:function(g){if(g==null){return}var c="#"+g;var d=a(c);if(d.length>0){var b=a.jqx.parseSourceTag(d[0]);var f=b.items;var e=b.index;this.source=f;this.fromSelect=true;this.clearSelection();this.selectedIndex=e;this.selectedIndexes[this.selectedIndex]=this.selectedIndex;this.refresh()}},invalidate:function(){this._cachedItemHtml=[];this._renderItems();this.virtualSize=null;this._updateSize()},refresh:function(c){var b=this;if(this.vScrollBar==undefined){return}this.itemHeight=parseInt(this.itemHeight);this._cachedItemHtml=[];this.visibleItems=new Array();var d=function(e){if(e==true){if(b.selectedIndex!=-1){var f=b.selectedIndex;b.selectedIndex=-1;b._stopEvents=true;b.selectIndex(f,false,true);if(b.selectedIndex==-1){b.selectedIndex=f}b._stopEvents=false}}};if(this.itemswrapper!=null){this.itemswrapper.remove();this.itemswrapper=null}if(a.jqx.dataAdapter&&this.source!=null&&this.source._source){this.databind(this.source,c);d(c);return}if(this.autoBind||(!this.autoBind&&!c)){if(this.field){this.loadSelectTag()}this.items=this.loadItems(this.source)}this._render(false,c==true);d(c);this._raiseEvent("6")},loadSelectTag:function(){var b=a.jqx.parseSourceTag(this.field);this.source=b.items;if(this.selectedIndex==-1){this.selectedIndex=b.index}},_render:function(c,b){if(this._renderOnDemand){this.visibleItems=new Array();this.renderedVisibleItems=new Array();this._renderItems();return}this._addItems();this._renderItems();this.vScrollInstance.setPosition(0);this._cachedItemHtml=new Array();if(c==undefined||c){if(this.items!=undefined&&this.items!=null){if(this.selectedIndex>=0&&this.selectedIndex<this.items.length){this.selectIndex(this.selectedIndex,true,true,true)}}}if(this.allowDrag&&this._enableDragDrop){this._enableDragDrop();if(this.isTouchDevice()){this._removeHandlers();if(this.overlayContent){this.overlayContent.remove();this.overlayContent=null}this._updateTouchScrolling();this._addHandlers();return}}this._updateTouchScrolling();if(this.rendered){this.rendered()}if(this.ready){this.ready()}},_hitTest:function(c,f){if(this.filterable){f-=this.filterHeight;if(f<0){f=0}}var e=parseInt(this.vScrollInstance.value);var b=this._searchFirstVisibleIndex(f+e,this.renderedVisibleItems);if(this.renderedVisibleItems[b]!=undefined&&this.renderedVisibleItems[b].isGroup){return null}if(this.renderedVisibleItems.length>0){var d=this.renderedVisibleItems[this.renderedVisibleItems.length-1];if(d.height+d.top<f+e){return null}}b=this._searchFirstVisibleIndex(f+e);return this.visibleItems[b];return null},_searchFirstVisibleIndex:function(f,g){if(f==undefined){f=parseInt(this.vScrollInstance.value)}var d=0;if(g==undefined||g==null){g=this.visibleItems}var b=g.length;while(d<=b){var c=parseInt((d+b)/2);var e=g[c];if(e==undefined){break}if(e.initialTop>f&&e.initialTop+e.height>f){b=c-1}else{if(e.initialTop<f&&e.initialTop+e.height<=f){d=c+1}else{return c;break}}}return 0},_renderItems:function(){if(this.items==undefined||this.items.length==0){this.visibleItems=new Array();return}if(this.updatingListBox==true){return}var O=this.isTouchDevice();var H=this.vScrollInstance;var h=this.hScrollInstance;var g=parseInt(H.value);var f=parseInt(h.value);if(this.rtl){if(this.hScrollBar[0].style.visibility!="hidden"){f=h.max-f}}var C=this.items.length;var N=this.host.width();var L=parseInt(this.content[0].style.width);var b=L+parseInt(h.max);var r=parseInt(this.vScrollBar[0].style.width)+2;if(this.vScrollBar[0].style.visibility=="hidden"){r=0}if(this.hScrollBar[0].style.visibility!="visible"){b=L}var l=this._getVirtualItemsCount();var M=new Array();var G=0;var F=parseInt(this.element.style.height)+2;if(this.element.style.height.indexOf("%")!=-1){F=this.host.outerHeight()}if(isNaN(F)){F=0}var u=0;var t=0;var R=0;if(H.value==0||this.visibleItems.length==0){for(var s=0;s<this.items.length;s++){var z=this.items[s];if(z.visible){z.top=-g;z.initialTop=-g;if(!z.isGroup&&z.visible){this.visibleItems[t++]=z;z.visibleIndex=t-1}this.renderedVisibleItems[R++]=z;z.left=-f;var c=z.top+z.height;if(c>=0&&z.top-z.height<=F){M[G++]={index:s,item:z}}g-=z.height;g--}}}var m=g>0?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0;var P=0;G=0;var A=this.vScrollInstance.value;var K=0;while(P<100+F){var z=this.renderedVisibleItems[m];if(z==undefined){break}if(z.visible){z.left=-f;var c=z.top+z.height-A;if(c>=0&&z.initialTop-A-z.height<=2*F){M[G++]={index:m,item:z}}}m++;if(z.visible){P+=z.initialTop-A+z.height-P}K++;if(K>this.items.length-1){break}}if(this._renderOnDemand){return}var p=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item");var i=this.toThemeProperty("jqx-listitem-state-group");var Q=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled");if(this.checkboxes){p+=" checkboxes"}var D=0;var n=this;for(var s=0;s<this.visualItems.length;s++){var E=this.visualItems[s];var J=function(){var y=E[0].firstChild;if(n.checkboxes){y=E[0].lastChild}if(y!=null){y.style.visibility="hidden";y.className=""}if(n.checkboxes){var S=E[0].firstChild;S.style.visibility="hidden"}};if(s<M.length){var z=M[s].item;if(z.initialTop-A>=F){J();continue}var B=a(E[0].firstChild);if(this.checkboxes){B=a(E[0].lastChild)}if(B.length==0){continue}if(B[0]==null){continue}B[0].className="";B[0].style.display="block";B[0].style.visibility="inherit";var q="";if(!z.isGroup&&!this.selectedIndexes[z.index]>=0){q=p}else{q=i}if(z.disabled||this.disabled){q+=" "+Q}if(this.roundedcorners){q+=" "+this.toThemeProperty("jqx-rc-all")}if(O){q+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")}B[0].className=q;if(this.renderer){if(!z.key){z.key=this.generatekey()}if(!this._cachedItemHtml){this._cachedItemHtml=new Array()}if(this._cachedItemHtml[z.key]){if(B[0].innerHTML!=this._cachedItemHtml[z.key]){B[0].innerHTML=this._cachedItemHtml[z.key]}}else{var x=this.renderer(z.index,z.label,z.value);B[0].innerHTML=x;this._cachedItemHtml[z.key]=B[0].innerHTML}}else{if(this.itemHeight!==-1){var k=2+2*parseInt(B.css("padding-top"));B[0].style.lineHeight=(z.height-k)+"px";B.css("vertical-align","middle")}if(z.html!=null&&z.html.toString().length>0){B[0].innerHTML=z.html}else{if(z.label!=null||z.value!=null){if(z.label!=null){if(B[0].innerHTML!==z.label){B[0].innerHTML=z.label}if(a.trim(z.label)==""){B[0].innerHTML=this.emptyString;if(this.emptyString==""){B[0].style.height=(z.height-8)+"px"}}if(!this.incrementalSearch&&!z.disabled){if(this.searchString!=undefined&&this.searchString!=""){B[0].innerHTML=this._highlight(z.label.toString(),this.searchString)}}}else{if(z.label===null){B[0].innerHTML=this.emptyString;if(this.emptyString==""){B[0].style.height=(z.height-8)+"px"}}else{if(B[0].innerHTML!==z.value){B[0].innerHTML=z.value}else{if(z.label==""){B[0].innerHTML=" "}}}}}else{if(z.label==""||z.label==null){B[0].innerHTML="";B[0].style.height=(z.height-8)+"px"}}}}E[0].style.left=z.left+"px";E[0].style.top=z.initialTop-A+"px";z.element=B[0];if(this.isMaterialized()&&!this.renderer){if(this._checkForHiddenParent){a(z.element).addClass("ripple");a.jqx.ripple(a(z.element))}}if(z.title){B[0].title=z.title}if(this.equalItemsWidth&&!z.isGroup){if(u==0){var d=parseInt(b);var w=parseInt(B.outerWidth())-parseInt(B.width());d-=w;var I=1;if(I!=null){I=parseInt(I)}else{I=0}if(this.host.css("box-sizing")==="border-box"){d-=2}u=d;if(this.checkboxes&&this.hScrollBar[0].style.visibility=="hidden"){u-=this.checkboxSize+13}}if(L>this.virtualSize.width){B[0].style.width=u+"px";z.width=u}else{B[0].style.width=-4+this.virtualSize.width+"px";z.width=this.virtualSize.width-4}}else{if(B.width()<this.host.width()){B.width(this.host.width()-2)}}if(this.rtl){B[0].style.textAlign="right"}if(this.autoItemsHeight){B[0].style.whiteSpace="pre-line";B.width(u);z.width=u}D=0;if(this.checkboxes&&!z.isGroup){if(D==0){D=(z.height-this.checkboxSize-3)/2;D=parseInt(D);D++}var e=a(E.children()[0]);e[0].item=z;if(!this.rtl){var o=(this.checkboxSize+9);if(B[0].style.left!=o+"px"){B[0].style.left=o+"px"}}else{if(B[0].style.left!="0px"){B[0].style.left="0px"}}if(this.rtl){e.css("left",8+z.width+"px")}e[0].style.top=D+"px";e[0].style.display="block";e[0].style.visibility="inherit";var v=z.checked;var j=z.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"";e[0].setAttribute("checked",z.checked);if(e[0].firstChild&&e[0].firstChild.firstChild&&e[0].firstChild.firstChild.firstChild){if(e[0].firstChild.firstChild){if(v){e[0].firstChild.firstChild.firstChild.className=j}else{if(v===false){e[0].firstChild.firstChild.firstChild.className=""}else{if(v===null){e[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate")}}}}}if(a.jqx.ariaEnabled){if(v){E[0].setAttribute("aria-selected",true)}else{E[0].removeAttribute("aria-selected")}}}else{if(this.checkboxes){var e=a(E.children()[0]);e.css({display:"none",visibility:"inherit"})}}if(!z.disabled&&((!this.filterable&&this.selectedIndexes[z.visibleIndex]>=0)||(z.selected&&this.filterable))){B.addClass(this.toThemeProperty("jqx-listitem-state-selected"));B.addClass(this.toThemeProperty("jqx-fill-state-pressed"));if(a.jqx.ariaEnabled){E[0].setAttribute("aria-selected",true);this._activeElement=E[0]}}else{if(!this.checkboxes){if(a.jqx.ariaEnabled){E[0].removeAttribute("aria-selected")}}}}else{J()}}},escape_HTML:function(b){return b.replace(/[&<>"]/g,function(d){var c={"&":"&","<":"<",">":">",'"':'"'};return c[d]||d})},generatekey:function(){var b=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b())},_calculateVirtualSize:function(l){if(this._renderOnDemand){return}var p=0;var n=2;var g=0;var o=document.createElement("span");if(this.equalItemsWidth){a(o).css("float","left")}o.style.whiteSpace="pre";var h=0;var i=undefined===l?this.host.outerHeight():l+2;document.body.appendChild(o);var e=this.items.length;var j=this.host.width();if(this.autoItemsHeight){j-=10;if(this.vScrollBar.css("visibility")!="hidden"){j-=20}}if(this.autoItemsHeight||this.renderer||this.groups.length>=1||(e>0&&this.items[0].html!=null&&this.items[0].html!="")){for(var g=0;g<e;g++){var s=this.items[g];if(s.isGroup&&(s.label==""&&s.html=="")){continue}if(!s.visible){continue}var d="";if(!s.isGroup){d+=this.toThemeProperty("jqx-widget jqx-listitem-state-normal jqx-rc-all")}else{d+=this.toThemeProperty("jqx-listitem-state-group jqx-rc-all")}d+=" "+this.toThemeProperty("jqx-fill-state-normal");if(this.isTouchDevice()){d+=" "+this.toThemeProperty("jqx-touch")}o.className=d;if(this.autoItemsHeight){o.style.whiteSpace="pre-line";var u=(this.checkboxSize+9);var c=this.checkboxes?-u:0;o.style.width=(c+j)+"px"}if(this.renderer){var k=this.renderer(s.index,s.label,s.value);o.innerHTML=k}else{if(s.html!=null&&s.html.toString().length>0){o.innerHTML=s.html}else{if(s.label!=null||s.value!=null){if(s.label!=null){o.innerHTML=s.label;if(s.label==""){o.innerHTML="Empty"}}else{o.innerHTML=this.escape_HTML(s.value)}}}}var r=o.offsetHeight;var t=o.offsetWidth;if(this.itemHeight>-1){r=this.itemHeight}s.height=r;s.width=t;r++;n+=r;p=Math.max(p,t);if(n<=i){h++}}}else{var n=0;var m=0;var b="";var v=0;var f=0;var q=-1;for(var g=0;g<e;g++){var s=this.items[g];if(s.isGroup&&(s.label==""&&s.html=="")){continue}if(!s.visible){continue}q++;var d="";if(q==0){d+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all");d+=" "+this.toThemeProperty("jqx-fill-state-normal");d+=" "+this.toThemeProperty("jqx-widget");d+=" "+this.toThemeProperty("jqx-listbox");d+=" "+this.toThemeProperty("jqx-widget-content");if(this.isTouchDevice()){d+=" "+this.toThemeProperty("jqx-touch");d+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")}o.className=d;if(this.autoItemsHeight){o.style.whiteSpace="pre-line";var u=(this.checkboxSize+9);var c=this.checkboxes?-u:0;o.style.width=(c+j)+"px"}if(s.html==null||(s.label==""||s.label==null)){o.innerHTML="Item"}else{if(s.html!=null&&s.html.toString().length>0){o.innerHTML=s.html}else{if(s.label!=null||s.value!=null){if(s.label!=null){if(s.label.toString().match(new RegExp("\\w"))!=null||s.label.toString().match(new RegExp("\\d"))!=null){o.innerHTML=s.label}else{o.innerHTML="Item"}}else{o.innerHTML=s.value}}}}var r=1+o.offsetHeight;if(this.itemHeight>-1){r=this.itemHeight}m=r}if(v!=undefined){f=v}if(s.html!=null&&s.html.toString().length>0){v=Math.max(v,s.html.toString().length);if(f!=v){b=s.html}}else{if(s.label!=null){v=Math.max(v,s.label.length);if(f!=v){b=s.label}}else{if(s.value!=null){v=Math.max(v,s.value.length);if(f!=v){b=s.value}}}}s.height=m;n+=m;n++;if(n<=i){h++}}o.innerHTML=b;p=o.offsetWidth}n+=2;if(h<10){h=10}if(this.filterable){n+=this.filterHeight}n-=4;o.parentNode.removeChild(o);return{width:p,height:n,itemsPerPage:h}},_getVirtualItemsCount:function(){if(this.virtualItemsCount==0){var b=parseInt(this.host.height())/5;if(b>this.items.length){b=this.items.length}return b}else{return this.virtualItemsCount}},_addItems:function(r){if(this._renderOnDemand){return}var v=this;if(v.updatingListBox==true){return}if(v.items==undefined||v.items.length==0){v.virtualSize={width:0,height:0,itemsPerPage:0};v._updatescrollbars();v.renderedVisibleItems=new Array();if(v.itemswrapper){v.itemswrapper.children().remove()}return}var h=v.host.height();if(r==false){var b=v._calculateVirtualSize(h);var g=b.itemsPerPage*2;if(v.autoHeight){g=v.items.length}v.virtualItemsCount=Math.min(g,v.items.length);var q=b.width;v.virtualSize=b;v._updatescrollbars();return}var n=this;var l=0;v.visibleItems=new Array();v.renderedVisibleItems=new Array();v._removeHandlers();if(v.allowDrag&&v._enableDragDrop){v.itemswrapper=null}if(v.itemswrapper==null){v.content[0].innerHTML="";v.itemswrapper=a('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>');v.itemswrapper[0].style.height=(2*h)+"px";v.content[0].appendChild(v.itemswrapper[0])}var b=v._calculateVirtualSize(h);var g=b.itemsPerPage*2;if(v.autoHeight){g=v.items.length}v.virtualItemsCount=Math.min(g,v.items.length);var v=this;var q=b.width;v.virtualSize=b;var c=Math.max(v.host.width(),17+b.width);v.itemswrapper[0].style.width=c+"px";var e=0;var i="";var f=a.jqx.browser.msie&&a.jqx.browser.version<9;var s=f?' unselectable="on"':"";for(var j=e;j<v.virtualItemsCount;j++){var u=v.items[j];var p="listitem"+j+v.element.id;if(v.theme!=""){i+="<div"+s+" role='option' id='"+p+"' class='jqx-listitem-element jqx-listitem-element-"+v.theme+"'>"}else{i+="<div"+s+" role='option' id='"+p+"' class='jqx-listitem-element'>"}if(v.checkboxes){var w=this.checkboxSize+8;i+='<div style="background-color: transparent; padding: 0; margin: 0; overflow:hidden; position: absolute; float: left; width: '+w+"px; height:  "+w+'px;" class="'+v.toThemeProperty("jqx-checkbox")+' chkbox">';var o='<div class="'+v.toThemeProperty("jqx-checkbox-default")+" "+v.toThemeProperty("jqx-fill-state-normal")+" "+v.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width:  '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;">';var x=u.checked?" "+v.toThemeProperty("jqx-checkbox-check-checked"):"";o+='<span style="width: '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;" class="checkBoxCheck'+x+'"></span>';o+="</div></div>";i+=o;i+="</div>"}i+="<span"+s+" style='white-space: pre; -ms-touch-action: none;'></span></div>"}if(n.WinJS){v.itemswrapper.html(i)}else{v.itemswrapper[0].innerHTML=i}var d=v.itemswrapper.children();for(var j=e;j<v.virtualItemsCount;j++){var u=v.items[j];var t=a(d[j]);if(v.allowDrag&&v._enableDragDrop){t.addClass("draggable")}if(v.checkboxes){var k=a(t.children()[0]);t.css("float","left");var m=a(t[0].firstChild);m.css("float","left")}t[0].style.height=u.height+"px";t[0].style.top=l+"px";l+=u.height+1;v.visualItems[j]=t}v._addHandlers();v._updatescrollbars();if(v.autoItemsHeight){var b=v._calculateVirtualSize(h);var g=b.itemsPerPage*2;if(v.autoHeight){g=v.items.length}v.virtualItemsCount=Math.min(g,v.items.length);var v=this;var q=b.width;v.virtualSize=b;v._updatescrollbars()}if(a.jqx.browser.msie&&a.jqx.browser.version<8){v.host.attr("hideFocus",true);v.host.find("div").attr("hideFocus",true)}},_updatescrollbars:function(){var k=this;if(!k.virtualSize){return}var n=k.virtualSize.height;var j=k.virtualSize.width;var f=k.vScrollInstance;var e=k.hScrollInstance;k._arrange(false);var l=false;var o=k.host.outerWidth();var m=k.host.outerHeight();var b=0;if(j>o){b=k.hScrollBar.outerHeight()+2}if(n+b>m){var d=f.max;f.max=2+parseInt(n)+b-parseInt(m-2);if(k.vScrollBar[0].style.visibility!="inherit"){k.vScrollBar[0].style.visibility="inherit";l=true}if(d!=f.max){f._arrange()}}else{if(k.vScrollBar[0].style.visibility!="hidden"){k.vScrollBar[0].style.visibility="hidden";l=true;f.setPosition(0)}}var h=0;if(k.vScrollBar[0].style.visibility!="hidden"){h=k.scrollBarSize+6}var g=k.checkboxes?(this.checkboxSize+6):0;if(k.autoItemsHeight){k.hScrollBar[0].style.visibility="hidden"}else{if(j>=o-h-g){var i=e.max;if(k.vScrollBar[0].style.visibility=="inherit"){e.max=g+h+parseInt(j)-k.host.width()+2}else{e.max=g+parseInt(j)-k.host.width()+4}if(k.hScrollBar[0].style.visibility!="inherit"){k.hScrollBar[0].style.visibility="inherit";l=true}if(i!=e.max){e._arrange()}if(k.vScrollBar[0].style.visibility=="inherit"){f.max=2+parseInt(n)+k.hScrollBar.outerHeight()+2-parseInt(k.host.height())}}else{if(k.hScrollBar[0].style.visibility!="hidden"){k.hScrollBar[0].style.visibility="hidden";l=true}}}e.setPosition(0);if(l){k._arrange()}if(k.itemswrapper){k.itemswrapper[0].style.width=Math.max(0,Math.max(o-2,17+j))+"px";k.itemswrapper[0].style.height=Math.max(0,2*m)+"px"}var c=k.isTouchDevice();if(c){if(k.vScrollBar.css("visibility")!="visible"&&k.hScrollBar.css("visibility")!="visible"){a.jqx.mobile.setTouchScroll(false,k.element.id)}else{a.jqx.mobile.setTouchScroll(true,k.element.id)}}},clear:function(){this.source=null;this.visibleItems=new Array();this.renderedVisibleItems=new Array();this.itemsByValue=new Array();this.clearSelection();this.refresh()},clearSelection:function(b){for(var c=0;c<this.selectedIndexes.length;c++){if(this.selectedIndexes[c]&&this.selectedIndexes[c]!=-1){this._raiseEvent("1",{index:c,type:"api",item:this.getVisibleItem(c),originalEvent:null})}this.selectedIndexes[c]=-1}this.selectedIndex=-1;this.selectedValue=null;this.selectedValues=new Array();if(b!=false){this._renderItems()}},unselectIndex:function(c,d){if(isNaN(c)){return}this.selectedIndexes[c]=-1;var g=false;for(var e=0;e<this.selectedIndexes.length;e++){var b=this.selectedIndexes[e];if(b!=-1&&b!=undefined){g=true}}if(!g){this.selectedValue=null;this.selectedIndex=-1;var f=this.getVisibleItem(c);if(f){if(this.selectedValues[f.value]){this.selectedValues[f.value]=null}}}if(d==undefined||d==true){this._renderItems();this._raiseEvent("1",{index:c,type:"api",item:this.getVisibleItem(c),originalEvent:null})}this._updateInputSelection();this._raiseEvent("2",{index:c,type:"api",item:this.getItem(c)})},getInfo:function(){var d=this;var c=this.getItems();var b=this.getVisibleItems();var e=function(){var h=d.vScrollInstance.value;if(d.filterable){h-=d.filterHeight}var m=new Array();for(var g=0;g<b.length;g++){var j=b[g];if(j){var f=j.initialTop;var l=j.height;var k=true;if(f+l-h<0||f-h>=d.host.height()){k=false}if(k){m.push(j)}}}return m}();return{items:c,visibleItems:b,viewItems:e}},getItem:function(c){if(c==-1||isNaN(c)||typeof(c)==="string"){if(c===-1){return nul