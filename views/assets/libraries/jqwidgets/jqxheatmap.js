/*
jQWidgets v11.0.1 (2020-Dec)
Copyright (c) 2011-2020 jQWidgets.
License: https://jqwidgets.com/license/
*/
/* eslint-disable */

(function(a){a.jqx.jqxWidget("jqxHeatMap","",{});a.extend(a.jqx._jqxHeatMap.prototype,{defineInstance:function(){var b={width:"auto",xAxis:{labels:[],opposedPosition:false,isInversed:false,minimum:null,maximum:null,labelFormat:"short",},yAxis:{labels:[],opposedPosition:false,isInversed:false,},source:[],title:"Title",paletteSettings:{palette:[{value:0,color:"#5dc3f0",label:""},{value:50,color:"#4bb1de",label:""},{value:100,color:"#3885a6",label:""}],type:"Gradient",emptyPointColor:"#eee"},legendSettings:{position:"Right"},tooltipRender:null,_isXAxisInversed:false,_isYAxisInversed:false,};if(this===a.jqx._jqxHeatMap.prototype){return b}a.extend(true,this,b);return b},createInstance:function(){var b=this;if("NodeList" in window&&!NodeList.prototype.forEach){console.info("polyfill for IE11");NodeList.prototype.forEach=function(e,c){c=c||window;for(var d=0;d<this.length;d++){e.call(c,this[d],d,this)}}}b._setDefaultValues();b._renderAllElements();b._addHandlers()},_addHandlers:function(){var b=this;b.host.find(".jqx-heatmap-cell").on("mouseenter",function(c){var e=c.target;var d=e.getAttribute("data-value");if(b.legendSettings.position==="Top"||b.legendSettings.position==="Bottom"){b._showLegendArrow("horizontal",d)}else{b._showLegendArrow("vertical",d)}if(b._hideTimer){clearTimeout(b._hideTimer)}b._showTooltip(c.target);e.classList.toggle("jqx-opacity-50")});b.host.find(".jqx-heatmap-cell").on("mouseleave",function(){var d=event.target;var c;b._arrow.style.display="";d.classList.toggle("jqx-opacity-50");c=setTimeout(function(){b._tooltipContainer.classList.add("jqx-heatmap-hidden")},300);b._hideTimer=c});b.host.find(".jqx-color-container, .jqx-color-container-tick").on("click",function(){var c=a(this).attr("data-value");var d=a(this).attr("data-color-index");b._hideCells(d);b._toggleClass("jqx-color-container","jqx-selected-color",c);b._toggleClass("jqx-color-container-tick","jqx-opacity-50",c)})},_setDefaultValues:function(){var e=this;var d=Object.keys(e.xAxis);var b=Object.keys(e.yAxis);var c=Object.keys(e.legendSettings);var f=Object.keys(e.paletteSettings);if(d.indexOf("labels")===-1){e.xAxis.labels=[]}if(d.indexOf("opposedPosition")===-1){e.xAxis.opposedPosition=false}if(d.indexOf("isInversed")===-1){e.xAxis.isInversed=false}if(b.indexOf("opposedPosition")===-1){e.yAxis.opposedPosition=false}if(b.indexOf("isInversed")===-1){e.yAxis.isInversed=false}if(c.indexOf("position")===-1){e.legendSettings.position="Right"}if(f.indexOf("type")===-1){e.paletteSettings.type="Gradient"}if(f.indexOf("palette")===-1){e.paletteSettings.palette=[{value:0,color:"#5dc3f0",label:""},{value:50,color:"#4bb1de",label:""},{value:100,color:"#3885a6",label:""}]}if(f.indexOf("emptyPointColor")===-1){e.paletteSettings.emptyPointColor="#eee"}},_showTooltip:function(l){var i=this;var d=document.createElement("div");var p=l.getAttribute("data-value");var e=l.getAttribute("data-date");var g=l.getAttribute("data-column");var f=i.xAxis.labels[g];var c=l.getAttribute("data-row");var n=i.yAxis.labels[c];var k=f+" | "+n+" : "+p;var o=l.offsetWidth;var j=10;var h;var q;var b;if(!i._tooltipContainer){i._tooltipContainer=d}i.element.appendChild(i._tooltipContainer);i._tooltipContainer.classList.remove("jqx-heatmap-hidden");i._tooltipContainer.className="jqx-heatmap-tooltip";if(i.tooltipRender){if(i.xAxis.minimum&&i.xAxis.maximum){var m={xLabel:f,yLabel:n,value:p,date:e,content:k}}else{var m={xLabel:f,yLabel:n,value:p,content:k}}i.tooltipRender(m);k=m.content}if(i.xAxis.minimum&&i.xAxis.maximum){i._tooltipContainer.innerHTML=p+" on "+i._defaultDateTooltipFormat(new Date(e))}else{i._tooltipContainer.innerHTML=k}h=i._tooltipContainer.offsetWidth;q=i._tooltipContainer.offsetHeight;b=h-o;i._tooltipContainer.style.top=(l.offsetTop-q+j)+"px";if(b>0){i._tooltipContainer.style.left=(l.offsetLeft-b/2)+"px"}else{i._tooltipContainer.style.left=(l.offsetLeft+Math.abs(b)/2)+"px"}},_defaultDateTooltipFormat:function(c){var b={day:"numeric",weekday:"short",month:"short",year:"numeric"};var d=new Intl.DateTimeFormat("en-US",b);return d.format(c)},_getAllDates:function(){var d=this;var g=new Date(d.xAxis.minimum);var i=new Date(d.xAxis.maximum);var h=d.source[0].length;var f=[];var e=[];for(var c=g,b=0;c<=i;c.setDate(c.getDate()+1),b++){if(b<h){e.push(c.toISOString());continue}f.push(e);d._addMonthLabel(e);e=[];b=0;e.push(c.toISOString())}d._dateArray=f},_addMonthLabel:function(f){var e=this;var c={month:e.xAxis.labelFormat};var d=new Intl.DateTimeFormat("en-US",c);var b=new Date(f[0]);var g=d.format(b);e.xAxis.labels.push(g)},_renderGrid:function(){var g=this;var b=document.createElement("div");var e=document.createElement("div");var l=document.createElement("div");var f=document.createElement("div");b.className="jqx-heatmap-grid";e.className="jqx-x-axis-container";l.className="jqx-y-axis-container";f.className="jqx-heatmap-container-wrapper";g._setAxisOrigin();for(var d=0,c=g.source.length;d<c;d++){var k=document.createElement("div");var h=g.source[d];g._setGridColumn(k,d,c);for(var m=0,i=h.length;m<i;m++){var j=document.createElement("div");g._setGridCell(j,d,m,h);k.appendChild(j)}b.appendChild(k)}f.style.width=g._toPx(g.width);e.appendChild(b);l.appendChild(e);f.appendChild(l);g._gridXAxisContainer=e;g._gridYAxisContainer=l;g._gridContainerWrapper=f;g.element.appendChild(f)},_renderAxis:function(d,h,k,m){var f=this;var j=document.createElement("div");var c=f.element.querySelector(".jqx-heatmap-grid").offsetHeight;for(var g=0,b=h.length;g<b;g++){var n=h[g];var e=document.createElement("div");e.innerHTML=n;e.className=m;if(d==="x"){e.style.width="calc(100% /"+b+")";if(f.xAxis.minimum&&f.xAxis.maximum){var l=f.source.length;var i=(n.duplicates/l)*100;e.innerHTML=n.name;e.style.width=i+"%";if(f.xAxis.isInversed){e.style.textAlign="right"}else{e.style.textAlign="left"}}}else{j.style.height=c+"px";e.style.height="calc(100% /"+b+")"}j.appendChild(e)}if(d==="x"){j.className=k;f._gridXAxisContainer.appendChild(j)}else{j.className=k;f._gridYAxisContainer.appendChild(j)}},_getLabels:function(b){var d=this;var e={};var f=[];var c=0;b.forEach(function(h,g){if(h===b[g+1]){c++}else{c++;e={name:h,duplicates:c};f.push(e);c=0}});d.xAxis.labels=f},_renderAllAxis:function(){var d=this;var c;var e;var b;if(d.xAxis.minimum&&d.xAxis.maximum){d._getLabels(d.xAxis.labels)}d._renderAxis("x",d.xAxis.labels,"jqx-x-axis","jqx-x-axis-label");d._renderAxis("y",d.yAxis.labels,"jqx-y-axis","jqx-y-axis-label");b=d.element.querySelector(".jqx-y-axis");c=d.element.querySelectorAll(".jqx-x-axis-label");e=d.element.querySelectorAll(".jqx-y-axis-label");if(d.xAxis.opposedPosition){d._gridXAxisContainer.style.flexDirection="column-reverse";b.classList.add("jqx-margin-top-auto");c.forEach(function(f){f.classList.add("jqx-top")})}if(d.yAxis.opposedPosition){d._gridYAxisContainer.style.flexDirection="row";e.forEach(function(f){f.classList.add("jqx-right")})}},_setGridColumn:function(d,c,b){d.id="jqx-column-"+c;d.classList.add("jqx-column");d.style.width="calc(100% / "+b+")"},_setGridCell:function(b,c,e,h){var i=this;var n=h[e];b.classList.add("jqx-heatmap-cell");b.setAttribute("data-row",e);b.setAttribute("data-column",c);b.setAttribute("data-value",n);if(i.xAxis.minimum&&i.xAxis.maximum){b.setAttribute("data-date",i._dateArray[c][e])}for(var j=0,d=i.paletteSettings.palette.length;j<d;j++){if(n===null){continue}var m=Number(n);var f=i.paletteSettings.palette[j].value;var g=Number(f);var l=null;var k=null;if(j+1<d){l=i.paletteSettings.palette[j+1].value;k=Number(l)}if(k&&((m>=g&&m<k)||m<i._minValue)){b.setAttribute("data-color-index",j);break}else{if(!k&&(m>=g)){b.setAttribute("data-color-index",j)}}}if(i.xAxis.minimum&&i.xAxis.maximum){if(n===null){b.classList.add("jqx-empty-cell")}return}if(n===null){b.innerHTML="&nbsp";b.classList.add("jqx-empty-cell");return}b.innerHTML=n},_getTicksMinMax:function(){var h=this;var f=JSON.parse(JSON.stringify(h.paletteSettings.palette));var j=f[0].value;var g=